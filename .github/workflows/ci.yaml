# .github/workflows/ci.yaml
# This workflow defines the Continuous Integration (CI) process for your project.
name: CI Workflow # The name of your workflow, displayed in the GitHub Actions tab.
# Controls when the workflow will run.

on:

  push:
    branches: [ main ] 

  # Triggers the workflow on 'pull_request' events targeting the 'main' branch.
  # This is crucial for pre-merge checks, ensuring code quality before integration.
  pull_request:
    branches: [ main ] 

  # Allows you to run this workflow manually from the GitHub Actions tab.
  # Useful for testing or re-running failed workflows.
  workflow_dispatch: 

# A workflow run is made up of one or more jobs that can run sequentially or in parallel.
jobs: # Top-level element, starts at column 0
  # Defines a single job named "build-and-lint".
  build-and-lint:

    # The type of runner (virtual environment) that the job will execute on.
    # 'ubuntu-latest' provides a fresh Linux environment with necessary tools.
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of this job.
    steps:

      # Step 1: Checkout repository
      # Uses the 'actions/checkout' action to clone your repository into the runner's workspace.
      # This allows your job to access your code.
      - name: Checkout repository 
        uses: actions/checkout@v4 

      # Step 2: Set up Node.js environment
      # Uses the 'actions/setup-node' action to configure the Node.js environment.
      # We specify Node.js version 18, which is a common and compatible version for Vite React apps.
      # 'cache: npm' caches npm dependencies, significantly speeding up subsequent runs.
      - name: Set up Node.js 
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      # Step 3: Install project dependencies
      # Executes the 'npm install' command to download and install all project dependencies.
      - name: Install dependencies
        run: npm install

      # Step 4: Run ESLint
      # Executes the 'npm run lint' script defined in your package.json.
      # This step checks for code style issues and potential errors, ensuring code quality.
      - name: Run ESLint
        run: npm run lint
  
      # Step 5: Build project
      # Executes the 'npm run build' script defined in your package.json.
      # This step compiles your React project for production, verifying that it can be successfully built
      # and catches any build-time errors.
      - name: Build project
        run: npm run build 
